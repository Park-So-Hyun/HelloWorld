<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Chart">
	<select id="getVisitChange" resultType="kh.hello.dto.ChartVisitChangeDTO">
		select * from 
		(select vr.*, row_number() over(order by 1) rown from (select substr(to_char(visit), 1, 9) dateis, count(*) visitCount 
		from visit group by substr(to_char(visit), 1, 9) order by 1 desc) vr) where rown between 1 and 12 order by rown desc
	</select>
	<select id="getGenderRatio" resultType="kh.hello.dto.ChartGenderDTO">
		select gender, count(gender) genderCount from member group by gender
	</select>
	<select id="getJoinPath" resultType="kh.hello.dto.ChartJoinPathDTO">
		select joinPath, count(joinPath) pathCount from member group by joinPath
	</select>
</mapper>